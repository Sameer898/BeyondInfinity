{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createReducer = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _immutable = require(\"immutable\");\nvar _react = require(\"react\");\nvar _fieldReducer = require(\"./fieldReducer\");\nvar _getInitialState = require(\"./getInitialState\");\nvar createReducer = function createReducer(_ref) {\n  var fields = _ref.fields,\n    _ref$initialValues = _ref.initialValues,\n    initialValues = _ref$initialValues === void 0 ? (0, _immutable.Map)() : _ref$initialValues,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? {} : _ref$options,\n    formTools = _ref.formTools;\n  var calcInitialState = function calcInitialState() {\n    return (0, _getInitialState.getInitialState)(fields, initialValues, options, formTools);\n  };\n  var _useReducer = (0, _react.useReducer)(_fieldReducer.fieldReducer, (0, _immutable.Map)(), function () {\n      return calcInitialState();\n    }),\n    _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var hashCodeRef = (0, _react.useRef)();\n  (0, _react.useMemo)(function () {\n    if (!hashCodeRef.current) {\n      hashCodeRef.current = initialValues.hashCode();\n      setTimeout(function () {\n        options.initialized && options.initialized((0, _objectSpread2.default)({\n          initialValues: initialValues\n        }, formTools.current));\n      });\n      return;\n    }\n    hashCodeRef.current = initialValues.hashCode();\n    setTimeout(function () {\n      dispatch(_fieldReducer.actions.reset(calcInitialState()));\n      options.initialized && options.initialized((0, _objectSpread2.default)({\n        initialValues: initialValues\n      }, formTools.current));\n    });\n  }, [initialValues.hashCode()]);\n  return [state, dispatch];\n};\nexports.createReducer = createReducer;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createReducer","_objectSpread2","_slicedToArray2","_immutable","_react","_fieldReducer","_getInitialState","_ref","fields","_ref$initialValues","initialValues","Map","_ref$options","options","formTools","calcInitialState","getInitialState","_useReducer","useReducer","fieldReducer","_useReducer2","default","state","dispatch","hashCodeRef","useRef","useMemo","current","hashCode","setTimeout","initialized","actions","reset"],"sources":["D:/web development/Unzip/App/node_modules/react-hooks-useform/dist/reducer/createReducer.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createReducer = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _immutable = require(\"immutable\");\n\nvar _react = require(\"react\");\n\nvar _fieldReducer = require(\"./fieldReducer\");\n\nvar _getInitialState = require(\"./getInitialState\");\n\nvar createReducer = function createReducer(_ref) {\n  var fields = _ref.fields,\n      _ref$initialValues = _ref.initialValues,\n      initialValues = _ref$initialValues === void 0 ? (0, _immutable.Map)() : _ref$initialValues,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options,\n      formTools = _ref.formTools;\n\n  var calcInitialState = function calcInitialState() {\n    return (0, _getInitialState.getInitialState)(fields, initialValues, options, formTools);\n  };\n\n  var _useReducer = (0, _react.useReducer)(_fieldReducer.fieldReducer, (0, _immutable.Map)(), function () {\n    return calcInitialState();\n  }),\n      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var hashCodeRef = (0, _react.useRef)();\n  (0, _react.useMemo)(function () {\n    if (!hashCodeRef.current) {\n      hashCodeRef.current = initialValues.hashCode();\n      setTimeout(function () {\n        options.initialized && options.initialized((0, _objectSpread2.default)({\n          initialValues: initialValues\n        }, formTools.current));\n      });\n      return;\n    }\n\n    hashCodeRef.current = initialValues.hashCode();\n    setTimeout(function () {\n      dispatch(_fieldReducer.actions.reset(calcInitialState()));\n      options.initialized && options.initialized((0, _objectSpread2.default)({\n        initialValues: initialValues\n      }, formTools.current));\n    });\n  }, [initialValues.hashCode()]);\n  return [state, dispatch];\n};\n\nexports.createReducer = createReducer;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}