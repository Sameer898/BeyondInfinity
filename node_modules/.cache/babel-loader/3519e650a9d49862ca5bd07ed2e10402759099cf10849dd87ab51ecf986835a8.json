{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultListValue = exports.useListField = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\nvar _immutable = require(\"immutable\");\nvar _fieldReducer = require(\"../reducer/fieldReducer\");\nvar _resolveFieldData = require(\"../resolveFieldData\");\nvar _generateDefaultListState = require(\"../reducer/generateDefaultListState\");\nvar _prepareNameForValidate = require(\"./prepareNameForValidate\");\nvar _getId = require(\"../helpers/getId\");\n\n/**\n * @param  fieldArgs { import(\"../useForm\").IFormFieldArgs}\n * @returns {import(\"../useForm\").IFormField}\n */\nvar useListField = function useListField(state, dispatch) {\n  var fieldArgs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var getAllValues = arguments.length > 3 ? arguments[3] : undefined;\n  var formOptions = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var requiredMessage = fieldArgs.requiredMessage || 'Required';\n  var setValue = function setValue(value) {\n    var s = (0, _generateDefaultListState.generateDefaultListState)(fieldArgs, (0, _immutable.Map)().setIn(fieldArgs.name.split('.'), value), formOptions);\n    dispatch(_fieldReducer.actions.updateList(fieldArgs.name, s.get('items')));\n    validate(s.get('items'));\n  };\n  var validate = function validate(items) {\n    var message;\n    if (fieldArgs.validate) {\n      message = fieldArgs.validate(items, (0, _prepareNameForValidate.prepareNameForValidate)(fieldArgs.name), state.get('getAllValues'));\n    }\n    if (!message && items.size === 0 && !fieldArgs.optional) {\n      message = requiredMessage;\n    }\n    dispatch(_fieldReducer.actions.validationResult(fieldArgs.name, Boolean(message), message || ''));\n  };\n  var add = function add() {\n    var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _immutable.Map)();\n    var options = state.getIn(['initial', 'options']);\n    var field = state.getIn(['initial', 'field']);\n    var items = state.get('items', (0, _immutable.List)());\n    var itemState = (0, _generateDefaultListState.getFields)(field.fields, item, options, fieldArgs.name, items.size);\n    dispatch(_fieldReducer.actions.addListItem(fieldArgs.name, itemState));\n    validate(items.push(item));\n  };\n  var remove = function remove(index) {\n    var items = state.get('items', (0, _immutable.List)());\n    dispatch(_fieldReducer.actions.removeListItem(fieldArgs.name, index));\n    validate(items.remove(index));\n  };\n  var updateIndex = function updateIndex(fromIndex, toIndex) {\n    dispatch(_fieldReducer.actions.updateListIndex(fieldArgs.name, fromIndex, toIndex));\n  };\n  var fieldData = state.getIn(['items'], (0, _immutable.List)()).map(function (item) {\n    return (0, _resolveFieldData.resolveFieldData)(item, dispatch, getAllValues, formOptions);\n  }).toArray();\n  var id = (0, _getId.getId)(formOptions.id, fieldArgs.name);\n  return {\n    props: {\n      id: id,\n      error: state.getIn(['current', 'error']),\n      helperText: state.getIn(['current', 'helperText']),\n      label: state.getIn(['initial', 'label']),\n      items: fieldData.map(function (item, index) {\n        var key = \"\".concat(fieldArgs.name, \".\").concat(index);\n        return (0, _objectSpread2.default)({}, (0, _resolveFieldData.getFieldProps)(item, state.getIn(['items', index]), (0, _getId.getId)(formOptions.id, key)), {\n          key: key\n        });\n      }),\n      add: add,\n      remove: remove,\n      updateIndex: updateIndex\n    },\n    setValue: setValue\n  };\n};\nexports.useListField = useListField;\nvar defaultListValue = (0, _immutable.List)();\nexports.defaultListValue = defaultListValue;","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","defaultListValue","useListField","_objectSpread2","_immutable","_fieldReducer","_resolveFieldData","_generateDefaultListState","_prepareNameForValidate","_getId","state","dispatch","fieldArgs","arguments","length","undefined","getAllValues","formOptions","requiredMessage","setValue","s","generateDefaultListState","Map","setIn","name","split","actions","updateList","get","validate","items","message","prepareNameForValidate","size","optional","validationResult","Boolean","add","item","options","getIn","field","List","itemState","getFields","fields","addListItem","push","remove","index","removeListItem","updateIndex","fromIndex","toIndex","updateListIndex","fieldData","map","resolveFieldData","toArray","id","getId","props","error","helperText","label","key","concat","default","getFieldProps"],"sources":["D:/web development/Unzip/App/node_modules/react-hooks-useform/dist/fields/useListField.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.defaultListValue = exports.useListField = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _immutable = require(\"immutable\");\n\nvar _fieldReducer = require(\"../reducer/fieldReducer\");\n\nvar _resolveFieldData = require(\"../resolveFieldData\");\n\nvar _generateDefaultListState = require(\"../reducer/generateDefaultListState\");\n\nvar _prepareNameForValidate = require(\"./prepareNameForValidate\");\n\nvar _getId = require(\"../helpers/getId\");\n\n/**\n * @param  fieldArgs { import(\"../useForm\").IFormFieldArgs}\n * @returns {import(\"../useForm\").IFormField}\n */\nvar useListField = function useListField(state, dispatch) {\n  var fieldArgs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var getAllValues = arguments.length > 3 ? arguments[3] : undefined;\n  var formOptions = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  var requiredMessage = fieldArgs.requiredMessage || 'Required';\n\n  var setValue = function setValue(value) {\n    var s = (0, _generateDefaultListState.generateDefaultListState)(fieldArgs, (0, _immutable.Map)().setIn(fieldArgs.name.split('.'), value), formOptions);\n    dispatch(_fieldReducer.actions.updateList(fieldArgs.name, s.get('items')));\n    validate(s.get('items'));\n  };\n\n  var validate = function validate(items) {\n    var message;\n\n    if (fieldArgs.validate) {\n      message = fieldArgs.validate(items, (0, _prepareNameForValidate.prepareNameForValidate)(fieldArgs.name), state.get('getAllValues'));\n    }\n\n    if (!message && items.size === 0 && !fieldArgs.optional) {\n      message = requiredMessage;\n    }\n\n    dispatch(_fieldReducer.actions.validationResult(fieldArgs.name, Boolean(message), message || ''));\n  };\n\n  var add = function add() {\n    var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (0, _immutable.Map)();\n    var options = state.getIn(['initial', 'options']);\n    var field = state.getIn(['initial', 'field']);\n    var items = state.get('items', (0, _immutable.List)());\n    var itemState = (0, _generateDefaultListState.getFields)(field.fields, item, options, fieldArgs.name, items.size);\n    dispatch(_fieldReducer.actions.addListItem(fieldArgs.name, itemState));\n    validate(items.push(item));\n  };\n\n  var remove = function remove(index) {\n    var items = state.get('items', (0, _immutable.List)());\n    dispatch(_fieldReducer.actions.removeListItem(fieldArgs.name, index));\n    validate(items.remove(index));\n  };\n\n  var updateIndex = function updateIndex(fromIndex, toIndex) {\n    dispatch(_fieldReducer.actions.updateListIndex(fieldArgs.name, fromIndex, toIndex));\n  };\n\n  var fieldData = state.getIn(['items'], (0, _immutable.List)()).map(function (item) {\n    return (0, _resolveFieldData.resolveFieldData)(item, dispatch, getAllValues, formOptions);\n  }).toArray();\n  var id = (0, _getId.getId)(formOptions.id, fieldArgs.name);\n  return {\n    props: {\n      id: id,\n      error: state.getIn(['current', 'error']),\n      helperText: state.getIn(['current', 'helperText']),\n      label: state.getIn(['initial', 'label']),\n      items: fieldData.map(function (item, index) {\n        var key = \"\".concat(fieldArgs.name, \".\").concat(index);\n        return (0, _objectSpread2.default)({}, (0, _resolveFieldData.getFieldProps)(item, state.getIn(['items', index]), (0, _getId.getId)(formOptions.id, key)), {\n          key: key\n        });\n      }),\n      add: add,\n      remove: remove,\n      updateIndex: updateIndex\n    },\n    setValue: setValue\n  };\n};\n\nexports.useListField = useListField;\nvar defaultListValue = (0, _immutable.List)();\nexports.defaultListValue = defaultListValue;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}